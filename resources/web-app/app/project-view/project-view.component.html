<div class="project-view">

	<!-- OPTIONS -->
	<div id="options-container" class="panel panel-default">
		<div class="panel-body">
			<h3 class="options-container-title">Project {{project?.name}}</h3>
			<button type="button" class="btn btn-primary" (click)="load()">Refresh</button>
			<button type="button" class="btn btn-default" (click)="back()">Back</button>
		</div>
	</div>

	<!-- DATA -->
	<div id="data" *ngIf="showData">
		<h5>Details</h5>

		<div class="panel panel-default">
			<div class="panel-body">
				<div><strong>Name:</strong> {{project.name}}</div>
				<div><strong>Description:</strong> {{project.description}}</div>
				<div><strong>Tasks:</strong> {{project.tasks?.length}}</div>
			</div>
		</div>

		<h5 *ngIf="project.tasks?.length > 0">Tasks</h5>

		<div id="project-task-list" class="list-group" *ngIf="project.tasks?.length > 0">
			<div *ngFor="let task of project.tasks" class="project-task-row list-group-item">
				<h4 class="list-group-item-heading">{{task.name}}</h4>
				<div class="list-group-item-text">
					<p>
						<strong>Description:</strong>{{task.description}}
						<br/>
						<strong>Steps:</strong>{{task.steps?.length}}
					</p>
					<div>
						<button type="button" class="btn btn-success" (click)="showTaskOptions(project.id, task.id)">Run</button>
						<button type="button" class="btn btn-default" (click)="view(project.id, task.id)">View</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div id="no-data" *ngIf="showEmptyData">
		<div class="panel panel-default">
			<div class="panel-body">
				<div>Project not found</div>
			</div>
		</div>
	</div>

	<div id="error-data" *ngIf="showError">
		<div class="panel panel-default">
			<div class="panel-body">
				<h3>Problem while loading project</h3>
				<p id="error-data-message"></p>
				<button type="button" class="btn btn-primary" onclick="back()">Back</button>
			</div>
		</div>
	</div>

	<div id="loading-data" *ngIf="showLoading">
		<div class="panel panel-default">
			<div class="panel-body">Loading...</div>
		</div>
	</div>

	<form *ngIf="form" (ngSubmit)="run('', '')" [formGroup]="form">
		<div *ngFor="let taskOption of taskOptions" class="form-row">
			<label [attr.for]="taskOption.id">{{taskOption.description}}</label>

			<div [ngSwitch]="taskOption.type">

				<input *ngSwitchCase="'text'" [formControlName]="taskOption.id" [id]="taskOption.id" type="text">

				<select [id]="taskOption.id" *ngSwitchCase="'select'" [formControlName]="taskOption.id">
					<option *ngFor="let selectOption of taskOption.values" [value]="selectOption.value">{{selectOption.text}}</option>
				</select>
			</div>
		</div>

		<div class="form-row">
			<button type="submit" class="btn btn-success">Run</button>
		</div>
	</form>

</div>

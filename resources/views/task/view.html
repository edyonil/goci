{{define "content"}}
<div class="project-view">

    <!-- OPTIONS -->
    <div id="options-container" class="panel panel-default hiddenContent">
        <div class="panel-body">
            <h3 class="options-container-title">Task <span class="ph-project-task-name"></span></h3>
            <button type="button" class="btn btn-primary ph-project-task-run-button" onclick="projectTaskRun(Util.getQueryParam('task'))">Run</button>
            <button type="button" class="btn btn-success" onclick="load()">Refresh</button>
            <button type="button" class="btn btn-default" onclick="back()">Back</button>
        </div>
    </div>

    <!-- DATA -->
    <div id="data">
        <h5>Details</h5>

        <div class="panel panel-default">
            <div class="panel-body">
                <div><strong>Name:</strong> <span class="ph-project-task-name"></span></div>
                <div><strong>Description:</strong> <span class="ph-project-task-description"></span></div>
                <div><strong>Steps:</strong> <span class="ph-project-task-steps-num"></span></div>
            </div>
        </div>
    </div>

    <div id="no-data">
        <div class="panel panel-default">
            <div class="panel-body">
                <div>Task not found</div>
            </div>
        </div>
    </div>

    <div id="error-data">
        <div class="panel panel-default">
            <div class="panel-body">
                <h3>Problem while loading task</h3>
                <p id="error-data-message"></p>
                <button type="button" class="btn btn-primary" onclick="back()">Back</button>
            </div>
        </div>
    </div>

    <div id="loading-data">
        <div class="panel panel-default">
            <div class="panel-body">Loading...</div>
        </div>
    </div>

</div>

<!-- STARTUP -->
<script>
    function load()
    {
        Task.view(Util.getQueryParam('project'), Util.getQueryParam('task'), function() {
			Util.showOptionsContainer();
		});
    }

	function projectTaskRun(taskId)
    {
        Task.run(Util.getQueryParam('project'), taskId);
    }

	function back()
    {
        Util.redirect('/project/view?project=' + Util.getQueryParam('project'));
    }

	$(document).ready(function() {
		load();
	});
</script>
{{end}}
# import GoCI package (optional)
var goci = import("goci")

# import Go packages (one or any on same line)
var os, exec = import("os"), import("os/exec")
var time = import("time")

# sleep function
goci.Job.SetProgress(10)
d, _ = time.ParseDuration("10s")
time.Sleep(d)
goci.Job.UpdateDuration()

# append html/string to output
tabName = goci.OG_CONSOLE

goci.Job.SetProgress(20)
goci.Job.AppendOutputLine(tabName, "My text!")
goci.Job.AppendOutputLine(tabName, "GOCI_WORKSPACE: " + goci.WORKSPACE_DIR)
goci.Job.AppendOutputLine(tabName, "GOCI_RESOURCES_DIR: " + goci.RESOURCES_DIR)
goci.Job.AppendOutputLine(tabName, "GOCI_HOST: " + goci.HOST)
goci.Job.AppendOutputLine(tabName, "JOB ID: " + goci.Job.ID)
goci.Job.AppendOutputLine(tabName, "TASK ID: " + goci.Job.TaskID)
goci.Job.AppendOutputLine(tabName, "STEP DESC: " + goci.Step.Description)
goci.Job.AppendOutputLine(tabName, "STEP INDEX: " + goci.StepIndex)

# create a new tab with any html/text
goci.Job.SetProgress(30)
tabName = "Result"

goci.Job.AppendOutputLine(tabName, "<img src='http://placehold.it/350x150'>")
goci.Job.AppendOutputLine(tabName, "This is a new content for a new tab. You can create many tabs you want!")
goci.Job.UpdateDuration()

# execute anything command line and append results to output
goci.Job.SetProgress(70)
cmd = exec.Command("ls", "-lah")
o = cmd.Run()
goci.Job.UpdateDuration()

# call functions from GoCI
goci.Job.SetProgress(80)
d, _ = time.ParseDuration("10s")
time.Sleep(d)
goci.Exec("ls", "-l")
goci.Job.UpdateDuration()

# set job progress
goci.Job.SetProgress(100)